<?xml version="1.0" encoding="utf-8"?>
<!--
Profile:  [OrderBot] Facet of Nourishing 70-80
Authors:  TuckMeIntoBread, Sodimm
Requirements:  Manually complete the deliveries between quests to raise esteem level.
-->
<Profile>
  <Name>[OrderBot] Facet of Nourishing 70-80.xml</Name>
  <BehaviorDirectory>..\Quest Behaviors</BehaviorDirectory>
  <Order>
    <If Condition="not IsQuestCompleted(69191)">
      <LogMessage Message="You still need to unlock the Crystalline Mean from Katliss."/>
    </If>
    <!-- Friends of a Feather (Level 70) -->
    <If Condition="not HasQuest(68775) and not IsQuestCompleted(68775) and IsQuestCompleted(69191) and Core.Player.ClassLevel &lt; 70">
      <LogMessage Message="You aren't high enough level to accept the quest yet. You need to be 70."/>
    </If>
    <If Condition="not HasQuest(68769) and not IsQuestCompleted(68769) and IsQuestCompleted(69191) and Core.Player.ClassLevel &gt; 69">
      <GetTo ZoneId="819" XYZ="-19.87827, 20.186, -132.0194"/>
      <If Condition="IsQuestAcceptQualified(68769)">
        <PickupQuest QuestId="68769" NpcId="1027235" XYZ="-19.51636, 20.186, -130.1748"/>
      </If>
    </If>
    <If Condition="HasQuest(68769) and not IsQuestCompleted(68769) and GetQuestStep(68769) == 1">
      <GetTo ZoneId="819" XYZ="53.47564, 36.19769, -178.1339"/>
      <TalkTo NpcId="1028481" XYZ="52.96399, 36.19769, -179.4614" QuestId="68769" StepId="1"/>
    </If>
    <If Condition="HasQuest(68769) and not IsQuestCompleted(68769) and GetQuestStep(68769) == 2">
      <If Condition="not IsOnMap(819)">
        <GetTo ZoneId="819" XYZ="54.1333, 36.19769, -179.9113"/>
      </If>
      <EmoteNPC Emote="pet" NpcId="1028482" XYZ="54.18469, 36.19769, -182.6964" QuestId="68769" StepId="2"/>
    </If>
    <If Condition="HasQuest(68769) and not IsQuestCompleted(68769) and GetQuestStep(68769) == 3">
      <GetTo ZoneId="819" XYZ="-129.398, 0, -65.22559"/>
      <TalkTo NpcId="1029854" XYZ="-130.2053, 0, -63.95056" QuestId="68769" StepId="3"/>
    </If>
    <If Condition="HasQuest(68769) and not IsQuestCompleted(68769) and GetQuestStep(68769) == 255">
      <GetTo ZoneId="819" XYZ="-19.95126, 20.186, -131.7272"/>
      <TurnIn QuestId="68769" NpcId="1027235" XYZ="-19.51636, 20.186, -130.1748"/>
    </If>
    <!-- Where We Belong (Level 75) -->
    <If Condition="not HasQuest(68775) and not IsQuestCompleted(68775) and IsQuestCompleted(69191) and Core.Player.ClassLevel &lt; 75">
      <LogMessage Message="You aren't high enough level to accept the next quest yet. You need to be 75."/>
    </If>
    <If Condition="not HasQuest(68770) and not IsQuestCompleted(68770) and IsQuestCompleted(68769)">
      <GetTo ZoneId="819" XYZ="-19.98079, 20.186, -132.0263"/>
      <If Condition="IsQuestAcceptQualified(68770)">
        <PickupQuest QuestId="68770" NpcId="1027235" XYZ="-19.51636, 20.186, -130.1748"/>
      </If>
      <If Condition="not IsQuestAcceptQualified(68770)">
        <LogMessage Message="Can't pick up the quest. You may still manually need to raise your esteem level."/>
      </If>
    </If>
    <If Condition="HasQuest(68770) and not IsQuestCompleted(68770) and GetQuestStep(68770) == 1">
      <If Condition="not IsOnMap(819)">
        <GetTo ZoneId="819" XYZ="-127.7985, 0, -64.33401"/>
      </If>
      <TalkTo NpcId="1028484" XYZ="-129.3508, 0, -62.91296" QuestId="68770" StepId="1"/>
    </If>
    <If Condition="HasQuest(68770) and not IsQuestCompleted(68770) and GetQuestStep(68770) == 2">
      <If Condition="not IsOnMap(819)">
        <GetTo ZoneId="819" XYZ="-127.7985, 0, -64.33401"/>
      </If>
      <SoSendChat Say="everything will be fine" NpcId="1028484" XYZ="-129.3508, 0, -62.91296" QuestId="68770" StepId="2"/>
    </If>
    <If Condition="HasQuest(68770) and not IsQuestCompleted(68770) and GetQuestStep(68770) == 3">
      <If Condition="not HqHasAtLeast(27253,1)">
        <!-- TODO: Call Lisbeth to craft it for us.
  Type can be either ALC or CUL, conditional for whatever class we're currently on? Json may need updating for v4 when Saga adds back orderbot functionality.
  <Lisbeth Json="[{'Item': 27253,'Group': 0,'Amount': 1,'Collectable': false,'QuickSynth': false,'SuborderQuickSynth': false,'Hq': false,'Food': 0,'Primary': true,'Type': 'Alchemist','Enabled': true,'Manual': 0,'Medicine': 0}]"/> -->
        <LogMessage Message="Please manually craft the required item."/>
      </If>
      <If Condition="HqHasAtLeast(27253,1)">
        <If Condition="not IsOnMap(819)">
          <GetTo ZoneId="819" XYZ="-129.1288, 0, -66.50261"/>
        </If>
        <HandOver ItemId="27253" RequiresHq="True" NpcId="1030659" XYZ="-131.1514, 0, -65.53754" QuestId="68770" StepId="3"/>
      </If>
    </If>
    <If Condition="HasQuest(68770) and not IsQuestCompleted(68770) and GetQuestStep(68770) == 4">
      <GetTo ZoneId="816" XYZ="-490.3106, 69.47037, 570.2024"/>
      <TalkTo NpcId="1028485" XYZ="-492.3934, 69.70277, 570.1838" QuestId="68770" StepId="4"/>
    </If>
    <If Condition="HasQuest(68770) and not IsQuestCompleted(68770) and GetQuestStep(68770) == 5">
      <GetTo ZoneId="816" XYZ="339.7574, 87.3213, -709.988"/>
      <TalkTo NpcId="1028487" XYZ="337.85, 87.30014, -710.6584" QuestId="68770" StepId="5"/>
    </If>
    <If Condition="HasQuest(68770) and not IsQuestCompleted(68770) and GetQuestStep(68770) == 255">
      <GetTo ZoneId="819" XYZ="-19.58057, 20.186, -131.8304"/>
      <TurnIn QuestId="68770" NpcId="1027235" XYZ="-19.51636, 20.186, -130.1748"/>
    </If>
    <!-- Healing Old Wounds (Level 80) -->
    <If Condition="not HasQuest(68775) and not IsQuestCompleted(68775) and IsQuestCompleted(69191) and Core.Player.ClassLevel &lt; 80">
      <LogMessage Message="You aren't high enough level to accept the next quest yet. You need to be 80."/>
    </If>
    <If Condition="not HasQuest(68771) and not IsQuestCompleted(68771) and IsQuestCompleted(68770)">
      <GetTo ZoneId="819" XYZ="-19.74363, 20.186, -132.2663"/>
      <If Condition="IsQuestAcceptQualified(68771)">
        <PickupQuest QuestId="68771" NpcId="1027235" XYZ="-19.51636, 20.186, -130.1748"/>
      </If>
      <If Condition="not IsQuestAcceptQualified(68771)">
        <LogMessage Message="Can't pick up the quest. You may still manually need to raise your esteem level."/>
      </If>
    </If>
    <If Condition="HasQuest(68771) and not IsQuestCompleted(68771) and GetQuestStep(68771) == 1">
      <GetTo ZoneId="819" XYZ="-130.0696, 0, -66.97832"/>
      <TalkTo NpcId="1030659" XYZ="-131.1514, 0, -65.53754" QuestId="68771" StepId="1"/>
    </If>
    <If Condition="HasQuest(68771) and not IsQuestCompleted(68771) and GetQuestStep(68771) == 2">
      <If Condition="not HqHasAtLeast(27255,1)">
        <!-- TODO: Call Lisbeth to craft it for us.
  Type can be either ALC or CUL, conditional for whatever class we're currently on? Json may need updating for v4 when Saga adds back orderbot functionality.
  <Lisbeth Json="[{'Item': 27255,'Group': 0,'Amount': 1,'Collectable': false,'QuickSynth': false,'SuborderQuickSynth': false,'Hq': false,'Food': 0,'Primary': true,'Type': 'Alchemist','Enabled': true,'Manual': 0,'Medicine': 0}]"/> -->
        <LogMessage Message="Please manually craft the required item."/>
      </If>
      <If Condition="HqHasAtLeast(27255,1)">
        <If Condition="not IsOnMap(819)">
          <GetTo ZoneId="819" XYZ="-129.7589, 0, -67.16715"/>
        </If>
        <HandOver ItemId="27255" RequiresHq="True" NpcId="1030659" XYZ="-131.1514, 0, -65.53754" QuestId="68771" StepId="2"/>
      </If>
    </If>
    <If Condition="HasQuest(68771) and not IsQuestCompleted(68771) and GetQuestStep(68771) == 3">
      <GetTo ZoneId="813" XYZ="355.2938, 3.787517, 223.0079"/>
      <TalkTo NpcId="1028489" XYZ="355.4285, 3.828937, 224.1702" QuestId="68771" StepId="3"/>
    </If>
    <If Condition="HasQuest(68771) and not IsQuestCompleted(68771) and GetQuestStep(68771) == 4">
      <GetTo ZoneId="819" XYZ="30.7549, 36.20521, -207.8439"/>
      <TalkTo NpcId="1028491" XYZ="29.25146, 36.20521, -207.3854" QuestId="68771" StepId="4"/>
    </If>
    <If Condition="HasQuest(68771) and not IsQuestCompleted(68771) and GetQuestStep(68771) == 5">
      <GetTo ZoneId="819" XYZ="-129.848, 0, -65.91407"/>
      <TalkTo NpcId="1030659" XYZ="-131.1514, 0, -65.53754" QuestId="68771" StepId="5"/>
    </If>
    <If Condition="HasQuest(68771) and not IsQuestCompleted(68771) and GetQuestStep(68771) == 255">
      <GetTo ZoneId="819" XYZ="-19.85457, 20.186, -131.5319"/>
      <TurnIn QuestId="68771" NpcId="1027235" XYZ="-19.51636, 20.186, -130.1748"/>
    </If>
  </Order>
</Profile>
