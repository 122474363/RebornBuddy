<?xml version="1.0" encoding="UTF-8"?>
<!--
Profile:  [OrderBot] Blacksmith Class Quests.
Authors:  TuckMeIntoBread, Sodimm.
Required Botbases:  Lisbeth.
Required Quest Completion:  A Realm Reborn & Heavensward Blacksmith Quests.
-->
<Profile>
  <Name>[OrderBot] Blacksmith Class Quests.</Name>
  <BehaviorDirectory>..\..\Quest Behaviors</BehaviorDirectory>
  <BehaviorDirectory>..\..\..\..\BotBases\Lisbeth</BehaviorDirectory>
  <Order>
    <If Condition="not IsQuestCompleted(67547)">
      <LogMessage Message="You haven't finished all of the Heavensward Blacksmith quests yet!"/>
      <WaitWhile Condition="not IsQuestCompleted(67547)"/>
    </If>
    <!-- A Missive from the Far East (Level 60) -->
    <If Condition="not HasQuest(68129) and not IsQuestCompleted(68129) and IsQuestCompleted(67547) and Core.Player.ClassLevel &gt; 59">
      <If Condition="not IsOnMap(128)">
        <GetTo ZoneId="128" XYZ="-31.56651, 44.49999, 185.0013"/>
      </If>
      <NoCombatMoveTo XYZ="-31.56651, 44.49999, 185.0013"/>
      <If Condition="IsQuestAcceptQualified(68129)">
        <PickupQuest QuestId="68129" NpcId="1000997" XYZ="-31.26581, 44.49997, 185.5344"/>
      </If>
    </If>
    <If Condition="HasQuest(68129) and not IsQuestCompleted(68129) and GetQuestStep(68129) == 1">
      <If Condition="not IsOnMap(129)">
        <GetTo ZoneId="129" XYZ="-215.9861, 5.999996, 162.7398"/>
      </If>
      <NoCombatMoveTo XYZ="-215.9861, 5.999996, 162.7398"/>
      <TalkTo NpcId="1021040" XYZ="-217.1816, 5.999996, 162.2797" QuestId="68129" StepId="1"/>
    </If>
    <If Condition="HasQuest(68129) and not IsQuestCompleted(68129) and GetQuestStep(68129) == 255">
      <If Condition="not IsOnMap(128)">
        <GetTo ZoneId="128" XYZ="-31.86705, 44.49996, 184.5974"/>
      </If>
      <NoCombatMoveTo XYZ="-31.86705, 44.49996, 184.5974"/>
      <TurnIn ItemIds="2002065" QuestId="68129" NpcId="1000997" XYZ="-31.26581, 44.49997, 185.5344"/>
      <WaitTimer WaitTime="3"/>
    </If>
    <!-- The Client is King (Level 63) -->
    <If Condition="not HasQuest(68152) and not IsQuestCompleted(68152) and IsQuestCompleted(68129) and Core.Player.ClassLevel &gt; 62">
      <If Condition="not IsOnMap(128)">
        <GetTo ZoneId="128" XYZ="-31.86705, 44.49996, 184.5974"/>
      </If>
      <NoCombatMoveTo XYZ="-31.86705, 44.49996, 184.5974"/>
      <If Condition="IsQuestAcceptQualified(68152)">
        <PickupQuest QuestId="68152" NpcId="1000997" XYZ="-31.26581, 44.49997, 185.5344"/>
      </If>
    </If>
    <If Condition="HasQuest(68152) and not IsQuestCompleted(68152) and GetQuestStep(68152) == 1">
      <If Condition="not IsOnMap(128)">
        <GetTo ZoneId="128" XYZ="-184.048, 41, 183.7282"/>
      </If>
      <NoCombatMoveTo XYZ="-184.048, 41, 183.7282"/>
      <SoTalkTo NpcId="1021042" XYZ="-184.9241, 41, 184.6799" QuestId="68152" StepId="1"/>
    </If>
    <If Condition="HasQuest(68152) and not IsQuestCompleted(68152) and GetQuestStep(68152) == 2">
      <If Condition="not IsOnMap(128)">
        <GetTo ZoneId="128" XYZ="-31.56689, 44.49995, 184.0667"/>
      </If>
      <NoCombatMoveTo XYZ="-31.56689, 44.49995, 184.0667"/>
      <TalkTo NpcId="1000997" XYZ="-31.26581, 44.49997, 185.5344" QuestId="68152" StepId="2"/>
    </If>
    <If Condition="HasQuest(68152) and not IsQuestCompleted(68152) and GetQuestStep(68152) == 3">
      <If Condition="not IsOnMap(128)">
        <GetTo ZoneId="128" XYZ="-4.915592, 39.51749, 16.79177"/>
      </If>
      <NoCombatMoveTo XYZ="-4.915592, 39.51749, 16.79177"/>
      <TalkTo NpcId="1021043" XYZ="-5.56958, 39.51749, 17.25787" QuestId="68152" StepId="3"/>
    </If>
    <If Condition="HasQuest(68152) and not IsQuestCompleted(68152) and GetQuestStep(68152) == 255">
      <Lisbeth Orders="\Profiles\Sodimm\Crafting\Blacksmith\[OrderBot] BSM 63.json"/>
      <WaitTimer WaitTime="3"/>
      <StopCrafting/>
      <If Condition="not IsOnMap(128)">
        <GetTo ZoneId="128" XYZ="-31.50769, 44.5, 184.9527"/>
      </If>
      <NoCombatMoveTo XYZ="-31.50769, 44.5, 184.9527"/>
      <TurnIn ItemIds="17886" QuestId="68152" NpcId="1000997" XYZ="-31.26581, 44.49997, 185.5344"/>
      <WaitTimer WaitTime="3"/>
    </If>
    <!-- Blood Ties (Level 65) -->
    <If Condition="not HasQuest(68153) and not IsQuestCompleted(68153) and IsQuestCompleted(68152) and Core.Player.ClassLevel &gt; 64">
      <If Condition="not IsOnMap(128)">
        <GetTo ZoneId="128" XYZ="-31.50769, 44.5, 184.9527"/>
      </If>
      <NoCombatMoveTo XYZ="-31.50769, 44.5, 184.9527"/>
      <If Condition="IsQuestAcceptQualified(68153)">
        <PickupQuest QuestId="68153" NpcId="1000997" XYZ="-31.26581, 44.49997, 185.5344"/>
      </If>
    </If>
    <If Condition="HasQuest(68153) and not IsQuestCompleted(68153) and GetQuestStep(68153) == 1">
      <If Condition="not IsOnMap(129)">
        <GetTo ZoneId="129" XYZ="-187.0464, 3.999966, 177.5832"/>
      </If>
      <NoCombatMoveTo XYZ="-187.0464, 3.999966, 177.5832"/>
      <SoTalkTo NpcId="1021044" XYZ="-188.983, 3.999864, 177.5387" QuestId="68153" StepId="1"/>
    </If>
    <If Condition="HasQuest(68153) and not IsQuestCompleted(68153) and GetQuestStep(68153) == 2">
      <If Condition="not IsOnMap(128)">
        <GetTo ZoneId="128" XYZ="-184.2916, 41, 184.5182"/>
      </If>
      <NoCombatMoveTo XYZ="-184.2916, 41, 184.5182"/>
      <SoHandOver ItemIds="2002071" NpcId="1021042" XYZ="-184.9241, 41, 184.6799" QuestId="68153" StepId="2"/>
    </If>
    <If Condition="HasQuest(68153) and not IsQuestCompleted(68153) and GetQuestStep(68153) == 3">
      <Lisbeth Orders="\Profiles\Sodimm\Crafting\Blacksmith\[OrderBot] BSM 65.json"/>
      <WaitTimer WaitTime="3"/>
      <StopCrafting/>
      <If Condition="not IsOnMap(129)">
        <GetTo ZoneId="129" XYZ="-188.1376, 3.999918, 177.7511"/>
      </If>
      <NoCombatMoveTo XYZ="-188.1376, 3.999918, 177.7511"/>
      <HandOver ItemIds="17888" NpcId="1021044" XYZ="-188.983, 3.999864, 177.5387" QuestId="68153" StepId="3"/>
    </If>
    <If Condition="HasQuest(68153) and not IsQuestCompleted(68153) and GetQuestStep(68153) == 255">
      <If Condition="not IsOnMap(128)">
        <GetTo ZoneId="128" XYZ="-31.51809, 44.49999, 184.7543"/>
      </If>
      <NoCombatMoveTo XYZ="-31.51809, 44.49999, 184.7543"/>
      <TurnIn QuestId="68153" NpcId="1000997" XYZ="-31.26581, 44.49997, 185.5344"/>
      <WaitTimer WaitTime="3"/>
    </If>
    <!-- The Missing Piece (Level 68) -->
    <If Condition="not HasQuest(68154) and not IsQuestCompleted(68154) and IsQuestCompleted(68153) and Core.Player.ClassLevel &gt; 67">
      <If Condition="not IsOnMap(128)">
        <GetTo ZoneId="128" XYZ="-31.51809, 44.49999, 184.7543"/>
      </If>
      <NoCombatMoveTo XYZ="-31.51809, 44.49999, 184.7543"/>
      <If Condition="IsQuestAcceptQualified(68154)">
        <PickupQuest QuestId="68154" NpcId="1000997" XYZ="-31.26581, 44.49997, 185.5344"/>
      </If>
    </If>
    <If Condition="HasQuest(68154) and not IsQuestCompleted(68154) and GetQuestStep(68154) == 1">
      <If Condition="not IsOnMap(129)">
        <GetTo ZoneId="129" XYZ="-237.7715, 16.2, 40.2176"/>
      </If>
      <NoCombatMoveTo XYZ="-237.7715, 16.2, 40.2176"/>
      <TalkTo NpcId="1021046" XYZ="-238.8495, 16.2, 39.81079" QuestId="68154" StepId="1"/>
    </If>
    <If Condition="HasQuest(68154) and not IsQuestCompleted(68154) and GetQuestStep(68154) == 2">
      <If Condition="not IsOnMap(128)">
        <GetTo ZoneId="128" XYZ="-31.62722, 44.49998, 184.8541"/>
      </If>
      <NoCombatMoveTo XYZ="-31.62722, 44.49998, 184.8541"/>
      <TalkTo NpcId="1000997" XYZ="-31.26581, 44.49997, 185.5344" QuestId="68154" StepId="2"/>
    </If>
    <If Condition="HasQuest(68154) and not IsQuestCompleted(68154) and GetQuestStep(68154) == 3">
      <If Condition="not IsOnMap(128)">
        <GetTo ZoneId="128" XYZ="-50.22987, 42.79999, 192.7438"/>
      </If>
      <NoCombatMoveTo XYZ="-50.22987, 42.79999, 192.7438"/>
      <TalkTo NpcId="1000995" XYZ="-52.01807, 42.7997, 192.2179" QuestId="68154" StepId="3"/>
    </If>
    <If Condition="HasQuest(68154) and not IsQuestCompleted(68154) and GetQuestStep(68154) == 4">
      <Lisbeth Orders="\Profiles\Sodimm\Crafting\Blacksmith\[OrderBot] BSM 68.json"/>
      <WaitTimer WaitTime="3"/>
      <StopCrafting/>
      <If Condition="not IsOnMap(128)">
        <GetTo ZoneId="128" XYZ="-30.39445, 44.49998, 185.0105"/>
      </If>
      <NoCombatMoveTo XYZ="-30.39445, 44.49998, 185.0105"/>
      <HandOver ItemIds="17890" NpcId="1000997" XYZ="-31.26581, 44.49997, 185.5344" QuestId="68154" StepId="4"/>
    </If>
    <If Condition="HasQuest(68154) and not IsQuestCompleted(68154) and GetQuestStep(68154) == 5">
      <If Condition="not IsOnMap(128)">
        <GetTo ZoneId="128" XYZ="-184.0373, 41, 184.3588"/>
      </If>
      <NoCombatMoveTo XYZ="-184.0373, 41, 184.3588"/>
      <HandOver ItemIds="2002066" NpcId="1021042" XYZ="-184.9241, 41, 184.6799" QuestId="68154" StepId="5"/>
    </If>
    <If Condition="HasQuest(68154) and not IsQuestCompleted(68154) and GetQuestStep(68154) == 255">
      <If Condition="not IsOnMap(128)">
        <GetTo ZoneId="128" XYZ="-32.22143, 44.49998, 186.8418"/>
      </If>
      <NoCombatMoveTo XYZ="-32.22143, 44.49998, 186.8418"/>
      <TurnIn QuestId="68154" NpcId="1021047" XYZ="-31.8761, 44.5, 187.8232"/>
      <WaitTimer WaitTime="3"/>
    </If>
    <!-- The Final Face-off (Level 70) -->
    <If Condition="not HasQuest(68155) and not IsQuestCompleted(68155) and IsQuestCompleted(68154) and Core.Player.ClassLevel &gt; 69">
      <If Condition="not IsOnMap(128)">
        <GetTo ZoneId="128" XYZ="-32.39525, 44.67499, 185.0457"/>
      </If>
      <NoCombatMoveTo XYZ="-32.39525, 44.67499, 185.0457"/>
      <If Condition="IsQuestAcceptQualified(68155)">
        <PickupQuest QuestId="68155" NpcId="1000997" XYZ="-31.26581, 44.49997, 185.5344"/>
      </If>
    </If>
    <If Condition="HasQuest(68155) and not IsQuestCompleted(68155) and GetQuestStep(68155) == 1">
      <If Condition="not IsOnMap(628)">
        <GetTo ZoneId="628" XYZ="-80.8498, -6.999999, -67.58692"/>
      </If>
      <NoCombatMoveTo XYZ="-80.8498, -6.999999, -67.58692"/>
      <TalkTo NpcId="1021048" XYZ="-79.17908, -6.999999, -67.70435" QuestId="68155" StepId="1"/>
    </If>
    <If Condition="HasQuest(68155) and not IsQuestCompleted(68155) and GetQuestStep(68155) == 2">
      <If Condition="not IsOnMap(628)">
        <GetTo ZoneId="628" XYZ="-135.3349, -4.417055, 198.8495"/>
      </If>
      <NoCombatMoveTo XYZ="-135.3349, -4.417055, 198.8495"/>
      <TalkTo NpcId="1019050" XYZ="-135.0271, -4.44043, 198.0164" QuestId="68155" StepId="2"/>
    </If>
    <If Condition="HasQuest(68155) and not IsQuestCompleted(68155) and GetQuestStep(68155) == 3">
      <If Condition="not IsOnMap(628)">
        <GetTo ZoneId="628" XYZ="-79.74056, -6.999999, -68.36252"/>
      </If>
      <NoCombatMoveTo XYZ="-79.74056, -6.999999, -68.36252"/>
      <TalkTo NpcId="1021048" XYZ="-79.17908, -6.999999, -67.70435" QuestId="68155" StepId="3"/>
    </If>
    <If Condition="HasQuest(68155) and not IsQuestCompleted(68155) and GetQuestStep(68155) == 4">
      <Lisbeth Orders="\Profiles\Sodimm\Crafting\Blacksmith\[OrderBot] BSM 70.json"/>
      <WaitTimer WaitTime="3"/>
      <StopCrafting/>
      <If Condition="not IsOnMap(628)">
        <GetTo ZoneId="628" XYZ="-135.7374, -4.417048, 199.0069"/>
      </If>
      <NoCombatMoveTo XYZ="-135.7374, -4.417048, 199.0069"/>
      <HandOver ItemIds="17892" NpcId="1019050" XYZ="-135.0271, -4.44043, 198.0164" QuestId="68155" StepId="4"/>
    </If>
    <If Condition="HasQuest(68155) and not IsQuestCompleted(68155) and GetQuestStep(68155) == 5">
      <If Condition="not IsOnMap(628)">
        <GetTo ZoneId="628" XYZ="-135.7374, -4.417048, 199.0069"/>
      </If>
      <NoCombatMoveTo XYZ="-135.7374, -4.417048, 199.0069"/>
      <TalkTo NpcId="1019050" XYZ="-135.0271, -4.44043, 198.0164" QuestId="68155" StepId="5"/>
    </If>
    <If Condition="HasQuest(68155) and not IsQuestCompleted(68155) and GetQuestStep(68155) == 255">
      <If Condition="not IsOnMap(128)">
        <GetTo ZoneId="128" XYZ="-31.7522, 44.49996, 184.6536"/>
      </If>
      <NoCombatMoveTo XYZ="-31.7522, 44.49996, 184.6536"/>
      <TurnIn QuestId="68155" NpcId="1000997" XYZ="-31.26581, 44.49997, 185.5344"/>
    </If>
  </Order>
</Profile>
