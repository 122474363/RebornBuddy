<?xml version="1.0" encoding="utf-8"?>
<!--
Profile:  [OrderBot] Facet of Crafting 70-80
Authors:  TuckMeIntoBread, Sodimm
Requirements:  Manually complete the deliveries between quests to raise esteem level.
-->
<Profile>
  <Name>[OrderBot] Facet of Crafting 70-80.xml</Name>
  <BehaviorDirectory>..\Quest Behaviors</BehaviorDirectory>
  <Order>
    <If Condition="not IsQuestCompleted(69191)">
      <LogMessage Message="You still need to unlock the Crystalline Mean from Katliss."/>
    </If>
    <!-- Cherished Memories (Level 70) -->
    <If Condition="not HasQuest(68766) and not IsQuestCompleted(68766) and IsQuestCompleted(69191) and Core.Player.ClassLevel &lt; 70">
      <LogMessage Message="You aren't high enough level to accept the quest yet. You need to be 70."/>
    </If>
    <If Condition="not HasQuest(68766) and not IsQuestCompleted(68766) and IsQuestCompleted(69191) and Core.Player.ClassLevel &gt; 69">
      <GetTo ZoneId="819" XYZ="8.775464, 20.186, -141.0599"/>
      <If Condition="IsQuestAcceptQualified(68766)">
        <PickupQuest QuestId="68766" NpcId="1028326" XYZ="10.94067, 20.186, -142.5345"/>
      </If>
    </If>
    <If Condition="HasQuest(68766) and not IsQuestCompleted(68766) and GetQuestStep(68766) == 1">
      <If Condition="not IsOnMap(819)">
        <GetTo ZoneId="819" XYZ="-20.86212, 19.99979, -30.68132"/>
      </If>
      <TalkTo NpcId="1028436" XYZ="-19.39423, 19.99979, -29.58728" QuestId="68766" StepId="1"/>
    </If>
    <If Condition="HasQuest(68766) and not IsQuestCompleted(68766) and GetQuestStep(68766) == 255">
      <GetTo ZoneId="819" XYZ="8.081221, 20.186, -137.3418"/>
      <TurnIn QuestId="68766" NpcId="1027234" XYZ="10.23871, 20.186, -138.2315"/>
    </If>
    <!-- For Sentimental Reasons (Level 75) -->
    <If Condition="not HasQuest(68767) and not IsQuestCompleted(68767) and IsQuestCompleted(68766) and Core.Player.ClassLevel &lt; 75">
      <LogMessage Message="You aren't high enough level to accept the quest yet. You need to be 75."/>
    </If>
    <If Condition="not HasQuest(68767) and not IsQuestCompleted(68767) and IsQuestCompleted(68766) and Core.Player.ClassLevel &gt; 74">
      <GetTo ZoneId="819" XYZ="7.736668, 20.186, -139.3228"/>
      <If Condition="IsQuestAcceptQualified(68767)">
        <PickupQuest QuestId="68767" NpcId="1027234" XYZ="10.23871, 20.186, -138.2315"/>
      </If>
    </If>
    <If Condition="HasQuest(68767) and not IsQuestCompleted(68767) and GetQuestStep(68767) == 1">
      <If Condition="not IsOnMap(819)">
        <GetTo ZoneId="819" XYZ="-54.45682, 3.999817, 199.4802"/>
      </If>
      <TalkTo NpcId="1028438" XYZ="-55.83282, 3.999817, 198.6571" QuestId="68767" StepId="1"/>
    </If>
    <If Condition="HasQuest(68767) and not IsQuestCompleted(68767) and GetQuestStep(68767) == 2">
      <GetTo ZoneId="819" XYZ="10.02578, 20.186, -139.429"/>
      <SoTalkTo NpcId="1027234" DialogOption="1" XYZ="10.23871, 20.186, -138.2315" QuestId="68767" StepId="2"/>
    </If>
    <If Condition="HasQuest(68767) and not IsQuestCompleted(68767) and GetQuestStep(68767) == 255">
      <If Condition="not HqHasAtLeast(27245,1)">
        <!-- TODO: Call Lisbeth to craft it for us.
  Type can be either CRP, WVR, or LTW, conditional for whatever class we're currently on? Json may need updating for v4 when Saga adds back orderbot functionality.
  <Lisbeth Json="[{'Item': 27245,'Group': 0,'Amount': 1,'Collectable': false,'QuickSynth': false,'SuborderQuickSynth': false,'Hq': false,'Food': 0,'Primary': true,'Type': 'Leatherworker','Enabled': true,'Manual': 0,'Medicine': 0}]"/> -->
        <LogMessage Message="Please manually craft the required item."/>
      </If>
      <If Condition="HqHasAtLeast(27245,1)">
        <GetTo ZoneId="819" XYZ="10.02578, 20.186, -139.429"/>
        <TurnIn ItemId="27245" RequiresHq="True" QuestId="68767" NpcId="1027234" XYZ="10.23871, 20.186, -138.2315"/>
      </If>
    </If>
    <!-- The Notes of Bond Restoring (Level 80) -->
    <If Condition="not HasQuest(68768) and not IsQuestCompleted(68768) and IsQuestCompleted(68767) and Core.Player.ClassLevel &lt; 80">
      <LogMessage Message="You aren't high enough level to accept the quest yet. You need to be 80."/>
    </If>
    <If Condition="not HasQuest(68768) and not IsQuestCompleted(68768) and IsQuestCompleted(68767) and Core.Player.ClassLevel &gt; 79">
      <GetTo ZoneId="819" XYZ="7.188652, 20.186, -139.2599"/>
      <If Condition="IsQuestAcceptQualified(68768)">
        <PickupQuest QuestId="68768" NpcId="1027234" XYZ="10.23871, 20.186, -138.2315"/>
      </If>
    </If>
    <If Condition="HasQuest(68768) and not IsQuestCompleted(68768) and GetQuestStep(68768) == 1">
      <If Condition="not IsOnMap(819)">
        <GetTo ZoneId="819" XYZ="9.599176, 20.186, -141.4957"/>
      </If>
      <SoTalkTo NpcId="1028326" XYZ="10.94067, 20.186, -142.5345" QuestId="68768" StepId="1"/>
    </If>
    <If Condition="HasQuest(68768) and not IsQuestCompleted(68768) and GetQuestStep(68768) == 2">
      <If Condition="not HqHasAtLeast(27247,1)">
        <!-- TODO: Call Lisbeth to craft it for us.
  Type can be either CRP, WVR, or LTW, conditional for whatever class we're currently on? Json may need updating for v4 when Saga adds back orderbot functionality.
  <Lisbeth Json="[{'Item': 27247,'Group': 0,'Amount': 1,'Collectable': false,'QuickSynth': false,'SuborderQuickSynth': false,'Hq': false,'Food': 0,'Primary': true,'Type': 'Leatherworker','Enabled': true,'Manual': 0,'Medicine': 0}]"/> -->
        <LogMessage Message="Please manually craft the required item."/>
      </If>
      <If Condition="HqHasAtLeast(27247,1)">
        <If Condition="not IsOnMap(819)">
          <GetTo ZoneId="819" XYZ="8.02634, 20.186, -139.935"/>
        </If>
        <HandOver ItemId="27247" RequiresHq="True" NpcId="1027234" XYZ="10.23871, 20.186, -138.2315" QuestId="68768" StepId="2"/>
      </If>
    </If>
    <If Condition="HasQuest(68768) and not IsQuestCompleted(68768) and GetQuestStep(68768) == 3">
      <GetTo ZoneId="819" XYZ="-54.42677, 3.999817, 199.2582"/>
      <TalkTo NpcId="1028438" XYZ="-55.83282, 3.999817, 198.6571" QuestId="68768" StepId="3"/>
    </If>
    <If Condition="HasQuest(68768) and not IsQuestCompleted(68768) and GetQuestStep(68768) == 4">
      <If Condition="not IsOnMap(819)">
        <GetTo ZoneId="819" XYZ="-54.42677, 3.999817, 199.2582"/>
      </If>
      <TalkTo NpcId="1028438" XYZ="-55.83282, 3.999817, 198.6571" QuestId="68768" StepId="4"/>
    </If>
    <If Condition="HasQuest(68768) and not IsQuestCompleted(68768) and GetQuestStep(68768) == 255">
      <GetTo ZoneId="819" XYZ="7.864693, 20.186, -139.6785"/>
      <TurnIn QuestId="68768" NpcId="1027234" XYZ="10.23871, 20.186, -138.2315"/>
    </If>
  </Order>
</Profile>
